}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
selection <- "coal"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
route_index$coal
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
load_all()
eiatools::data_index
# Selecting Update Ranges
paths <- eia_meta("", creds::eia_key) %>% get_routes()
paths$id
selection <- "crude-oil-imports"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
paths$id
selection <- "electricity"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
paths <- eia_meta("", creds::eia_key) %>% get_routes()
paths$id
selection <- "electricity"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
eiatools::route_index$electricity %>% dplyr::filter(api_endpoint == "electricity/facility-fuel")
eiatools::route_index$electricity %>% dplyr::filter(api_endpoint == "electricity/facility-fuel") %>% data_tree(creds::eia_key)
load_all()
eiatools::route_index$electricity %>% dplyr::filter(api_endpoint == "electricity/facility-fuel") %>% data_tree(creds::eia_key)
eia_call("https://api.eia.gov/v2/electricity/facility-fuel/data?api_key=UKCNbCB0m8aixfPBshQU3Jdlz2uZsEbG2HebvhHX&length=5000&offset=0&sort[0][column]=period&sort[0][direction]=desc") -> test
View(test)
load_all()
eiatools::route_index$electricity %>% dplyr::filter(api_endpoint == "electricity/facility-fuel") %>% data_tree(creds::eia_key)
paths <- eia_meta("", creds::eia_key) %>% get_routes()
paths$id
selection <- "electricity"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
paths$id
selection <- "natural-gas"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
paths$id
selection <- "nuclear-outages"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
paths$id
selection <- "seds"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
paths$id
selection <- "densified-biomass"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
paths$id
selection <- "total-energy"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
paths$id
selection <- "aeo"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
paths$id
selection <- "ieo"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::data_index
paths$id
selection <- "co2-emissions"
route_table <- eiatools::route_index[selection][[1]]
d_updates <- NULL
for(r in 1:nrow(route_table)){
d_out <- data_tree(route_table[r,], creds::eia_key)
if(!is.null(d_out)){
if(is.null(d_updates)){
d_updates <- d_out
}else{
d_updates <- dplyr::bind_rows(d_updates, d_out)
}
tryCatch({
data_index_old <- eiatools::data_index
print("Ready to update existing index")
data_index_old[selection] <- list(d_updates)
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
print("Overlaying existing index")
}, error = function(e){
data_index <- list()
data_index[selection] <- list(d_updates)
usethis::use_data(data_index, overwrite = T)
print("Doesn't exist yet.")
})
load_all()
eiatools::dataindex %>% names()
eiatools::data_index %>% names()
paths$id
paths$id %>% data.frame(id = .)
paths$id %>% data.frame(id = .) %>% dplyr::filter(id %in% (eiatools::data_index %>% names()))
paths$id %>% data.frame(id = .) %>% dplyr::filter(!id %in% (eiatools::data_index %>% names()))
eiatools::data_index
View(data_index)
library(devtools)
load_all()
data_index$petroleum %>% names()
route_index$petroleum %>% names()
data_index_old <- eiatools::data_index
for(p in 1:nrow(data_index_old)){
print(data_index_old[p,])
}
for(p in 1:nrow(data_index_old)){
print(data_index_old[p,])
}
data_index_old <- eiatools::data_index
for(p in 1:length(data_index_old)){
print(data_index_old[p])
}
for(p in 1:length(data_index_old)){
data_index_old[p] <- data_index_old[p] %>% dplyr::mutate(nickname = NA)
}
str(data_index_old[1])
for(p in 1:length(data_index_old)){
data_index_old[p][[1]] <- data_index_old[p][[1]] %>% dplyr::mutate(nickname = NA)
}
usethis::use_data(data_index, overwrite = T)
load_all()
eiatools::data_index
data_index$petroleum %>% names()
# Ensuring placeholder cols exist
data_index_old <- eiatools::data_index
for(p in 1:length(data_index_old)){
data_index_old[p][[1]] <- data_index_old[p][[1]] %>% dplyr::mutate(nickname = NA)
}
data_index <- data_index_old
usethis::use_data(data_index, overwrite = T)
load_all()
eiatools::data_index
use_r("collapse_index")
load_all()
collapse_index(data_tree)
collapse_index(data_index)
collapse_index(route_index)
librry(devtools)
librart(devtools)
library(devtools)
load_all()
data_index$petroleum
data_index$petroleum$api_endpoint
data_index$petroleum$api_endpoint %>% str()
data_index$petroleum
data_index$petroleum$facets
data_index$petroleum$facets[1]
data_index$petroleum %>% pull("facets")
data_index$petroleum %>% dplyr::pull("facets")
data_index$petroleum$data
data_index$petroleum
load_all()
data_index$petroleum %>% head() %>% dindex_get_data
data_index$petroleum %>% head() %>% dindex_get_data(api_key = creds::eia_key)
load_all()
data_index$petroleum %>% head() %>% dindex_get_data(api_key = creds::eia_key)
data_index$petroleum %>% head() %>% dindex_get_data(api_key = creds::eia_key) -> temp
View(temp)
load_all()
View(temp)
data_index$petroleum %>% head() %>% dindex_get_data(api_key = creds::eia_key) -> temp
load_all()
data_index$petroleum %>% head() %>% dindex_get_data(api_key = creds::eia_key) -> temp
data_index$`crude-oil-imports`
data_index$`crude-oil-imports` %>% pull(gradeId)
data_index$`crude-oil-imports` %>% dplyr::pull(gradeId) %>% unique()
load_all()
data_index$`crude-oil-imports` %>% dplyr::pull(gradeId) %>% unique()
data_index$petroleum %>% head() %>% dindex_get_data(api_key = creds::eia_key) -> temp
data_index$petroleum %>% head(2) %>% dindex_get_data(api_key = creds::eia_key) -> temp
View(temp)
load_all()
data_index$petroleum %>% head(2) %>% dindex_get_data(api_key = creds::eia_key) -> temp
shiny::runApp('shiny-app')
runApp('shiny-app')
install.packages("ggdark")
runApp('shiny-app')
?dark_theme_minimal
runApp('shiny-app')
library(devtools)
load_all()
runApp('shiny-app')
creds::eia_key
runApp('shiny-app')
shiny::runApp('shiny-app')
source("C:/Users/brayd/eiatools/R/eia_today_in_energy.R", echo=TRUE)
source("C:/Users/brayd/eiatools/R/html_reader.R", echo=TRUE)
runApp('shiny-app')
source("C:/Users/brayd/eiatools/R/eia_today_in_energy.R", echo=TRUE)
source("C:/Users/brayd/eiatools/R/eia_today_in_energy.R", echo=TRUE)
runApp('shiny-app')
library(magrittr)
runApp('shiny-app')
library(ggplot2)
runApp('shiny-app')
tools_list <- c("Regression", "Correlation", "Covariance", "Moving Window", "GARCH")
tools_list <- c("Regression", "Correlation", "Covariance", "Moving Window", "GARCH")
runApp('shiny-app')
api_key = "OaPIhpkD7JVc5gb7xOTMZMh9iA9uegIVBFRj6wQg"
source("C:/Users/brayd/eiatools/R/dindex_get_data.R", echo=TRUE)
load("C:/Users/brayd/eiatools/data/data_index.rda")
?data_index()
shiny::runApp('shiny-app')
library(shiny)
library(ggplot2)
data_index_test <- dindex_get_data(data_index, api_key)
runApp('shiny-app')
View(data_index)
runApp('shiny-app')
data_index_test <- dindex_get_data("coal", api_key, "2024-01-01",  "2025-01-01") ## Error Message
View(data_index)
runApp('shiny-app')
data_index_test <- dindex_get_data(data_index[["steo"]][["seriesDescription"]], api_key, "2024-01-01",  "2025-01-01") ## Error Message
runApp('shiny-app')
#=======
#library(ggplot2)
library(eiatools)
runApp('shiny-app')
runApp('shiny-app')
runApp('shiny-app')
source("C:/Users/brayd/eiatools/R/eia_today_in_energy.R", echo=TRUE)
runApp('shiny-app')
runApp('shiny-app')
View(data_index)
news_list
data_index
View(data_index)
data_list <- load(data_index)
data_list <- data_index
source_list <- str(data_list)
source_list <- str(data_list)
source_list <- names(data_list)
source_list
source_list <- list(names(data_list))
source_list
runApp('shiny-app')
category_list <- names(data_index$source_list_select)
category_list <- names(data_index$source_list_select)
runApp('shiny-app')
category_list <- names(data_list$steo)
data_list$steo
runApp('shiny-app')
runApp('shiny-app')
print(data_list)
print(category_list_select)
category_list
source_list
source_list
category_list
source_list
category_list
category_list
category_list
category_list
